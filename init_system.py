from database import DatabaseManager
import os

def main():
    # ุงุณู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    db_path = "twinx_pos.db"
    
    # ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุฌูุฏุฉุ ููุณุญูุง ุนุดุงู ูุจูููุง ุนูู ูุธุงูุฉ ุจุงูููุฏ ุงูุฌุฏูุฏ
    if os.path.exists(db_path):
        choice = input("โ๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุฌูุฏุฉ ุจุงููุนู. ูู ุชุฑูุฏ ุญุฐููุง ูุฅูุดุงุก ูุงุญุฏุฉ ุฌุฏูุฏุฉุ (y/n): ")
        if choice.lower() == 'y':
            os.remove(db_path)
            print("๐๏ธ ุชู ุญุฐู ุงููุงุนุฏุฉ ุงููุฏููุฉ.")
        else:
            print("โ ุฌุงุฑู ุงูุชุญุฏูุซ ุนูู ุงููุงุนุฏุฉ ุงูุญุงููุฉ...")

    print("โณ ุฌุงุฑู ุจูุงุก ูุธุงู Twinx ุงูุนููุงู...")
    
    # 1. ุชููุฆุฉ ูุฏูุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุฏู ููุญุฏู ููุจูู ูู ุงูุฌุฏุงูู)
    db = DatabaseManager(db_path)
    
    # 2. ุชุฌุฑุจุฉ ุณุฑูุนุฉ ููุชุฃูุฏ ุฅู ูู ุญุงุฌุฉ ุชูุงู
    print("\n๐ ูุญุต ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ...")
    tables = db.execute_query("SELECT name FROM sqlite_master WHERE type='table'")
    print(f"โ ุชู ุฅูุดุงุก {len(tables)} ุฌุฏูู ุจูุฌุงุญ!")
    
    # ุนุฑุถ ุฃุณูุงุก ุงูุฌุฏุงูู ุนุดุงู ุชุทูู
    print("-" * 30)
    for table in tables:
        print(f"๐ฆ {table['name']}")
    print("-" * 30)
    
    print("\n๐ ุงูุณูุณุชู ุฌุงูุฒ ูุงููุฏููููุงุช ูุงูุญุณุงุจุงุช ูุชุธุจุทุฉ!")

if __name__ == "__main__":
    main()